<!-- Botón hamburguesa para móviles -->
<button class="menu-toggle" (click)="toggleSidebar()">
  <i class="fas fa-bars"></i>
</button>

<!-- Overlay para cerrar el menú -->
<div class="overlay" [class.active]="isOpen" (click)="closeSidebar()"></div>

<!-- Sidebar -->
<nav class="sidebar" [class.active]="isOpen">
  <div class="sidebar-header">
    <img src="ZephyrGo.png" alt="Company Logo" class="logo">
  </div>

  <ul class="nav-list">
    <!-- Iterar sobre los elementos del menú principal -->
    <li *ngFor="let item of menuItems" class="nav-item" 
        [class.active]="item.isOpen"
        routerLinkActive="active-page" [routerLinkActiveOptions]="{exact: true}">
      
      <!-- CASO 1: Es un menú desplegable (tiene subMenu) -->
      <a *ngIf="item.subMenu" 
         class="nav-link dropdown-toggle" 
         (click)="toggleMenuItem(item)">
        <i [class]="item.icon + ' nav-icon'"></i>
        <span>{{ item.label }}</span>
        <i class="fas fa-chevron-right arrow"></i>
      </a>

      <!-- CASO 2: Es un enlace directo (NO tiene subMenu) -->
      <a *ngIf="!item.subMenu && item.route" 
         [routerLink]="item.route" 
         class="nav-link"
         (click)="closeSidebar()">
        <i [class]="item.icon + ' nav-icon'"></i>
        <span>{{ item.label }}</span>
      </a>

      <!-- Renderizado del submenú de primer nivel -->
      <ul *ngIf="item.subMenu" class="submenu">
        <li *ngFor="let subItem of item.subMenu" 
            class="submenu-item"
            [class.active]="subItem.isOpen"
            routerLinkActive="active-page" [routerLinkActiveOptions]="{exact: true}">

          <!-- CASO 3: El sub-item es un DESPLEGABLE (tiene subItems) -->
          <a *ngIf="subItem.subItems"
             class="submenu-toggle" 
             (click)="toggleSubMenuItem(subItem)">
            <span>{{ subItem.label }}</span>
            <i class="fas fa-chevron-right arrow-submenu"></i>
          </a>

          <!-- CASO 4: El sub-item es un ENLACE DIRECTO (NO tiene subItems) -->
          <a *ngIf="!subItem.subItems && subItem.route"
             [routerLink]="subItem.route"
             class="submenu-toggle"
             (click)="closeSidebar()">
            <span>{{ subItem.label }}</span>
          </a>

          <!-- Renderizado del submenú de segundo nivel (sin cambios) -->
          <ul *ngIf="subItem.subItems" class="submenu-level-2">
            <li *ngFor="let subSubItem of subItem.subItems"
                routerLinkActive="active-page" [routerLinkActiveOptions]="{exact: true}">
              <a [routerLink]="subSubItem.route" (click)="closeSidebar()">
                {{ subSubItem.label }}
              </a>
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>